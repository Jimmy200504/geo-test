<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Geolocation 測試</title>
</head>
<body>
  <h2>HTML5 Geolocation 測試</h2>
  <button onclick="test()">測試定位</button>
  <p id="result"></p>

  <script>
  function test() {
    const output = document.getElementById("result");
    if (!("geolocation" in navigator)) {
      output.innerText = "❌ 瀏覽器不支援 navigator.geolocation";
      return;
    }
    output.innerText = "嘗試取得位置中...";
    navigator.geolocation.getCurrentPosition(
      pos => {
        const {latitude, longitude, accuracy} = pos.coords;
        output.innerText = `✅ 支援！座標：${latitude}, ${longitude} (誤差±${Math.round(accuracy)}m)`;
      },
      err => {
        output.innerText = `⚠️ 支援但無法定位，錯誤碼：${err.code}, 訊息：${err.message}`;
      },
      { enableHighAccuracy:false, timeout:5000 }
    );
  }
  </script>
</body>
</html>
